require=function i(r,s,l){function a(t,e){if(!s[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}var n=s[t]={exports:{}};r[t][0].call(n.exports,function(e){return a(r[t][1][e]||e)},n,n.exports,i,r,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)a(l[e]);return a}({Colors:[function(e,t,o){"use strict";cc._RF.push(t,"e9e05xFVUZMZJxSkDzATeiN","Colors"),t.exports={startBg:new cc.color(89,69,61,255),overBg:new cc.color(89,69,61,255),gameBg:new cc.color(89,69,61,255),topBg:new cc.color(166,137,124,255),tileBg:new cc.color(166,137,124,255),powerBarBg:new cc.color(166,137,124,255),power:new cc.color("#39cb81"),num1:new cc.color("#ece2cf"),num2:new cc.color("#eed8af"),num3:new cc.color("#f3b37a"),num4:new cc.color("#f69460"),num5:new cc.color("#f77d5f"),num6:new cc.color("#f5552d"),num7:new cc.color("#f4d677"),num8:new cc.color("#f9d35a"),num9:new cc.color("#fdd01d"),num10:new cc.color("#ffae00"),num11:new cc.color("#ff9600"),num12:new cc.color("#ffab94"),num13:new cc.color("#ff8969"),num14:new cc.color("#f65c75"),num15:new cc.color("#f12e4e"),num16:new cc.color("#e9124f"),num17:new cc.color("#e9128b"),num18:new cc.color("#cd0ba2"),num19:new cc.color("#9a0baf"),num20:new cc.color("#6e0994"),num:new cc.color(222,153,36,255),sort0:new cc.color("#C100FF"),sort1:new cc.color("#FF00B8"),sort2:new cc.color("#FF4700")},cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"39193I/GjtNX5AeIUv04rSw","Game");var f=e("Global"),p=e("Colors");cc.Class({extends:cc.Component,properties:{tilePre:{default:null,type:cc.Prefab},powerPre:{default:null,type:cc.Prefab},bg:{default:null,type:cc.Node},topBg:{default:null,type:cc.Node},tiles:{default:null,type:Array},powers:{default:null,type:Array},scoreLabel:{default:null,type:cc.Label},scoreNum:{default:null,type:cc.Label},tileBg:{default:null,type:cc.Node},powerBarBg:{default:null,type:cc.Node},star1:cc.AudioClip,star2:cc.AudioClip,star3:cc.AudioClip,star4:cc.AudioClip,star5:cc.AudioClip,star6:cc.AudioClip,star7:cc.AudioClip,bgMusic:cc.AudioClip,maxNum:0,isCal:!1},onLoad:function(){cc.audioEngine.playMusic(this.bgMusic,!0),this.tiles=[[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null]],this.powers=[null,null,null,null,null];for(var e=0;e<5;e++){var t=cc.instantiate(this.powerPre);t.width=(this.powerBarBg.width-30)/5,t.height=this.powerBarBg.height-10,this.powerBarBg.addChild(t),t.setPosition(5+(5+t.width)*e+t.width/2,5+t.height/2),t.color=p.power,this.powers[e]=t}var o=new Array;this.maxNum=8;for(var c=0;c<this.maxNum-3;c++)o[c]=this.maxNum-3-c;var n=0;for(c=0;c<o.length;c++)n+=o[c];for(var i=0;i<5;i++)for(var r=0;r<5;r++){var s=cc.instantiate(this.tilePre);s.getComponent("Tile").game=this,s.width=(this.tileBg.width-30)/5,s.height=(this.tileBg.height-30)/5;for(var l=0;;){0;var a=new Array,u=new Array;l=Math.random()*n;var h=0,d=0;for(c=0;c<o.length;c++){if(d<=l&&l<=d+o[c]){h=c+1;break}d+=o[c]}if(s.getComponent("Tile").setNum(h,!1,!1),s.setPosition(5+(5+s.width)*r+s.width/2,5+(5+s.height)*i+s.height/2),this.tiles[i][r]=s,this.scanAround(i,r,-1,-1,h,a,u),a.length<3)break}s.getComponent("Tile").setArrPosition(i,r),this.tileBg.addChild(s)}},scanAround:function(e,t,o,c,n,i,r){if(null!=this.tiles[e][t]){var s=!1;if(null==r&&(r=new Array),-1==r.indexOf(e+"#"+t)){if(r.push(e+"#"+t),e<4&&(o!=e+1||c!=t)&&null!=this.tiles[e+1][t])parseInt(this.tiles[e+1][t].getComponent("Tile").numLabel.string)==n&&(-1==i.indexOf(e+"#"+t)&&i.push(e+"#"+t),this.scanAround(e+1,t,e,t,n,i,r),s=!0);if(0<e&&(o!=e-1||c!=t)&&null!=this.tiles[e-1][t])parseInt(this.tiles[e-1][t].getComponent("Tile").numLabel.string)==n&&(-1==i.indexOf(e+"#"+t)&&i.push(e+"#"+t),this.scanAround(e-1,t,e,t,n,i,r),s=!0);if(0<t&&(o!=e||c!=t-1)&&null!=this.tiles[e][t-1])parseInt(this.tiles[e][t-1].getComponent("Tile").numLabel.string)==n&&(-1==i.indexOf(e+"#"+t)&&i.push(e+"#"+t),this.scanAround(e,t-1,e,t,n,i,r),s=!0);if(t<4&&(o!=e||c!=t+1)&&null!=this.tiles[e][t+1])parseInt(this.tiles[e][t+1].getComponent("Tile").numLabel.string)==n&&(-1==i.indexOf(e+"#"+t)&&i.push(e+"#"+t),this.scanAround(e,t+1,e,t,n,i,r),s=!0);if(!s&&-1!=o&&-1!=c)parseInt(this.tiles[e][t].getComponent("Tile").numLabel.string)==n&&-1==i.indexOf(e+"#"+t)&&i.push(e+"#"+t)}}},operateLogic:function(e,t,o,c){var n=this,i=new Array,r=new Array;if(this.scanAround(e,t,-1,-1,o,i,r),3<=i.length){var s=0;for(var l in i){var a=i[l].split("#")[0],u=i[l].split("#")[1];s+=parseInt(10*this.tiles[a][u].getComponent("Tile").numLabel.string),a!=e||u!=t?(this.tiles[a][u].getComponent("Tile").destroyTile(),this.tiles[a][u]=null):(this.tiles[a][u].getComponent("Tile").setNum(o+1,!1,!0),this.maxNum=o+1>this.maxNum?o+1:this.maxNum)}if(this.scoreNum.string=parseInt(this.scoreNum.string)+s,this.scheduleOnce(function(){n.moveAllTileDown()},.1),!c)for(var h=0;h<5;h++)if(null==this.powers[h]){var d=cc.instantiate(this.powerPre);d.width=(this.powerBarBg.width-30)/5,d.height=this.powerBarBg.height-10,this.powerBarBg.addChild(d),d.setPosition(5+(5+d.width)*h+d.width/2,5+d.height/2),d.color=p.power,d.setScale(0),d.runAction(cc.scaleTo(.1,1)),this.powers[h]=d;break}switch(f.combo++,f.combo){case 1:cc.audioEngine.playEffect(this.star1);break;case 2:cc.audioEngine.playEffect(this.star2);break;case 3:cc.audioEngine.playEffect(this.star3);break;case 4:cc.audioEngine.playEffect(this.star4);break;case 5:cc.audioEngine.playEffect(this.star5);break;case 6:cc.audioEngine.playEffect(this.star6);break;case 7:default:cc.audioEngine.playEffect(this.star7)}return!0}return this.isCal=!1},moveAllTileDown:function(){for(var e=0;e<5;e++)for(var t=0;t<5;t++)if(null!=this.tiles[t][e])for(var o=t;0<o;o--)null==this.tiles[o-1][e]&&(this.tiles[o-1][e]=this.tiles[o][e],this.tiles[o][e]=null,this.tiles[o-1][e].getComponent("Tile").moveTo(o-1,e));this.scheduleOnce(function(){for(var c=this,e=new Array,t=0;t<this.maxNum-3;t++)e[t]=this.maxNum-3-t;var o=0;for(t=0;t<e.length;t++)o+=e[t];for(var n=0;n<5;n++)for(var i=0;i<5;i++)if(null==this.tiles[i][n]){var r=cc.instantiate(this.tilePre);r.getComponent("Tile").game=this,r.width=(this.tileBg.width-30)/5,r.height=(this.tileBg.height-30)/5;var s=Math.random()*o,l=0,a=0;for(t=0;t<e.length;t++){if(a<=s&&s<=a+e[t]){l=t+1;break}a+=e[t]}r.getComponent("Tile").setNum(l,!1,!1),r.getComponent("Tile").newTile(i,n),this.tiles[i][n]=r,this.tileBg.addChild(r)}this.scheduleOnce(function(){for(var e=!1,t=0;t<5;t++)for(var o=0;o<5;o++)e||(e=null!=c.tiles[o][t]&&c.operateLogic(o,t,parseInt(c.tiles[o][t].getComponent("Tile").numLabel.string),!1))},.5)},.3)},onDestroy:function(){cc.audioEngine.stopMusic(this.bgMusic)}}),cc._RF.pop()},{Colors:"Colors",Global:"Global"}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"33082e5T1NOqoNc6g/OQ8Mo","Global"),t.exports={score:0,combo:0,sortScore:function(e,t){return-e.score+t.score}},cc._RF.pop()},{}],Over:[function(e,t,o){"use strict";cc._RF.push(t,"abb92FkKAJAcZ76wc009Hlx","Over");var c=e("Global");cc.Class({extends:cc.Component,properties:{bg:{default:null,type:cc.Node},gameText:{default:null,type:cc.Node},backBtn:{default:null,type:cc.Node},textLabel:{default:null,type:cc.Label},scoreLabel:{default:null,type:cc.Label},scoreText:{default:null,type:cc.Node},overEffect:cc.AudioClip,addCoin:cc.AudioClip,btnEffect:cc.AudioClip,score:0,changeScore:0},onLoad:function(){cc.audioEngine.playEffect(this.overEffect),this.score=c.score,this.schedule(this.updateScore,.1,cc.REPEAT_FOREVER,2);var t=this;this.bg.on(cc.Node.EventType.TOUCH_START,function(e){cc.log("score text touch"),cc.audioEngine.playEffect(t.addCoin),t.changeScore=t.score,t.scoreLabel.string="最终分数："+t.changeScore},this.bg)},updateScore:function(){this.score<=this.changeScore&&this.unschedule(this.updateScore),this.changeScore+=20,this.changeScore=this.changeScore>this.score?this.score:this.changeScore,cc.audioEngine.playEffect(this.addCoin),this.scoreLabel.string="最终分数："+this.changeScore},back:function(){c.score=0,cc.audioEngine.playEffect(this.btnEffect),cc.director.loadScene("startScene")}}),cc._RF.pop()},{Global:"Global"}],Start:[function(e,t,o){"use strict";cc._RF.push(t,"34814nzs3pO+a9mpV/mWE6Q","Start");var r=e("Global");cc.Class({extends:cc.Component,properties:{gameName:{default:null,type:cc.Node},bg:{default:null,type:cc.Node},startBtn:{default:null,type:cc.Node},sortPre:{default:null,type:cc.Prefab,tooltip:""},btnEffect:cc.AudioClip},onLoad:function(){this.sort=null,this.sortObjectArr=[],this.readJson()},startGame:function(){cc.audioEngine.playEffect(this.btnEffect),cc.director.loadScene("gameScene")},onClickShowSort:function(){},onClickHideSort:function(){this.sort.removeFromParent(),this.sort=null},readJson:function(){var i=this;cc.loader.loadRes("account",function(e,t){if(e)cc.log("读取城市列表出错"+e);else{for(var o in t){cc.log(o);var c=t[o];for(var n in c)i.sortObjectArr.push(c[n])}i.sortObjectArr.sort(r.sortScore)}})}}),cc._RF.pop()},{Global:"Global"}],Tile:[function(e,t,o){"use strict";cc._RF.push(t,"33c61KUhGtMdKlxBheGl7E0","Tile");var s=e("Global"),l=e("Colors");cc.Class({extends:cc.Component,properties:{numLabel:{default:null,type:cc.Label},clickEffect:cc.AudioClip,addCoin:cc.AudioClip},onLoad:function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.game.isCal||(cc.audioEngine.playEffect(t.clickEffect),t.game.isCal=!0,s.combo=0,cc.audioEngine.playEffect(t.addCoin),t.setNum(parseInt(t.numLabel.string)+1,!0,!1))},this.node)},newTile:function(e,t){this.node.setPosition(5+(5+this.node.width)*t+this.node.width/2,5+(5+this.node.height)*e+this.node.height/2),this.node.setScale(0),this.node.runAction(cc.scaleTo(.1,1)),this.setArrPosition(e,t)},moveTo:function(e,t){this.row=e,this.col=t,this.node.stopActionByTag(1);var o=cc.moveTo(.2,cc.p(5+(5+this.node.width)*t+this.node.width/2,5+(5+this.node.height)*e+this.node.height/2));this.node.runAction(o),o.setTag(1)},destroyTile:function(){var e=cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(e){e.destroy()},this.node,this.node));this.node.runAction(e)},setArrPosition:function(e,t){this.row=e,this.col=t},setNum:function(e,t,o){switch(this.game.maxNum=e>this.game.maxNum?e:this.game.maxNum,this.numLabel.string=e){case 1:this.node.color=l.num1;break;case 2:this.node.color=l.num2;break;case 3:this.node.color=l.num3;break;case 4:this.node.color=l.num4;break;case 5:this.node.color=l.num5;break;case 6:this.node.color=l.num6;break;case 7:this.node.color=l.num7;break;case 8:this.node.color=l.num8;break;case 9:this.node.color=l.num9;break;case 10:this.node.color=l.num10;break;case 11:this.node.color=l.num11;break;case 12:this.node.color=l.num12;break;case 13:this.node.color=l.num13;break;case 14:this.node.color=l.num14;break;case 15:this.node.color=l.num15;break;case 16:this.node.color=l.num16;break;case 17:this.node.color=l.num17;break;case 18:this.node.color=l.num18;break;case 19:this.node.color=l.num19;break;case 20:this.node.color=l.num20;break;default:this.node.color=l.num}if(o&&this.node.runAction(cc.sequence(cc.scaleTo(.15,1.5),cc.scaleTo(.15,1))),t){var c=this.game.operateLogic(this.row,this.col,parseInt(this.numLabel.string),!0),n=this.game.powers;if(!c){for(var i=n.length-1;0<=i;i--)if(null!=n[i]){var r=cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(e){e.destroy()},null,n[i]));n[i].runAction(r),n[i]=null;break}null==n[0]&&(s.score=this.game.scoreNum.string,cc.director.loadScene("overScene"))}}}}),cc._RF.pop()},{Colors:"Colors",Global:"Global"}],sort:[function(e,t,o){"use strict";cc._RF.push(t,"b7fafQqP4hKtZ2afQlqd55S","sort");var i=e("Colors");cc.Class({extends:cc.Component,properties:{content:{default:null,type:cc.Node,tooltip:""},sortItem:{default:null,type:cc.Prefab,tooltip:""}},start:function(){},bind:function(e){this.game=e},showSortList:function(e){var t=e;for(var o in t){var c=t[o],n=cc.instantiate(this.sortItem);n.getChildByName("no.").getComponent(cc.Label).string=parseInt(o)+1,n.getChildByName("name").getComponent(cc.Label).string=c.account,n.getChildByName("score").getComponent(cc.Label).string=c.score,parseInt(o)<3&&(n.getChildByName("no.").color=i["sort"+parseInt(o)],n.getChildByName("name").color=i["sort"+parseInt(o)],n.getChildByName("score").color=i["sort"+parseInt(o)]),n.parent=this.content}},hideSort:function(){this.game.onClickHideSort()}}),cc._RF.pop()},{Colors:"Colors"}]},{},["Colors","Game","Global","Over","Start","Tile","sort"]);